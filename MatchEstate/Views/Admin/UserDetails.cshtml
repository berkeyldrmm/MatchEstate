@model ListingRequestModel;
@{
    Layout = "_AdminLayout";
}

<div class="container-fluid pt-4">
    <div class="row">
        <h4 style="margin-left:15px;">@Model.UserNameSurname</h4>
    </div>
    <div class="row">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header text-white" style="background-color: #FF2929;">
                    <h6 style="color:#ffffff;">Listings of User</h6>
                </div>
                <div class="card-body">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Listing Title</th>
                                <th>Listing Property Type</th>
                                <th>Listing Property Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var listing in Model.Listings)
                            {
                                <tr @(listing.Status ? "style=background-color:#95d5b2;" : "")>
                                    <td>@listing.Title</td>
                                    <td>@listing.PropertyType</td>
                                    <td>@listing.PropertyStatus</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="container-fluid pt-4 px-4">
                <div class="row g-4">
                    <div class="col-xl-6">
                        <div class="bg-secondary rounded h-100 p-4">
                            <h6 class="mb-4">Property Listing Types Chart</h6>

                            <canvas class="canvas" id="doughnut-chart"></canvas>
                        </div>
                    </div>
                    <div class="col-xl-6">
                        <div class="bg-secondary rounded h-100 p-4">
                            <h6 class="mb-4">For Sale/Rent Listings Chart</h6>

                            <canvas class="canvas" id="doughnut-chart2"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card">
                <div class="card-header text-white" style="background-color:#FF2929;">
                    <h6 style="color:#ffffff;">Request of User</h6>
                </div>
                <div class="card-body">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Request Title</th>
                                <th>Request Property Type</th>
                                <th>Request Property Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var request in Model.Requests)
                            {
                                <tr>
                                    <td>@request.Title</td>
                                    <td>@request.PropertyType</td>
                                    <td>@request.PropertyStatus</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="container-fluid pt-4 px-4">
                <div class="row g-4">
                    <div class="col-xl-6">
                        <div class="bg-secondary rounded h-100 p-4">
                            <h6 class="mb-4">Property Requests Types Chart</h6>

                            <canvas class="canvas" id="doughnut-chart3"></canvas>
                        </div>
                    </div>
                    <div class="col-xl-6">
                        <div class="bg-secondary rounded h-100 p-4">
                            <h6 class="mb-4">For Sale/Rent Request Chart</h6>

                            <canvas class="canvas" id="doughnut-chart4"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="~/js/getStatistics.js"></script>
<script>
    getStatistics(`https://localhost:7191/admin/GetUserStatistics?userId=@Model.UserId`);
</script>